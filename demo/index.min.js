!(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t,n){return(a=(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}})()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return a(e,arguments,i(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}function s(e){return(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}})(e)||(function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)})(e)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance")})()}var f=new WeakMap;function h(e,t){if(void 0!==e){var n=e[t];return"function"==typeof n?n.call():n}}function p(e,t){var n,r,i=t.split(".").reduce(h,e)||"";return n=i,(r=document.createElement("p")).textContent=n,r.innerHTML}function d(e,t){var n=e.children[t];return n||(n={name:t,children:{},observers:[]},e.children[t]=n),n}function v(e,t,n){var r,i,o=(r=n,i=d,function(){return r(i.apply(this,arguments))});return t.split(".").reduce(o,e)}function y(e,t){var n=(function(e){var t=f.get(e);return t||(t={children:{},observers:[]},f.set(e,t)),t})(t),r=!0,i=!1,o=void 0;try{for(var a,u=(function e(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t.childNodes[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;switch(l.nodeType){case 1:n.push.apply(n,s(k(l))),n.push.apply(n,s(e(l)));break;case 3:n.push.apply(n,s(x(l)))}}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n})(e)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value,c=l.target,h=l.key,p=l.update,d=p.bind(c,t,h);v(n,h,b(t)).observers.push(d),p.call(c,t,h)}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return e}function b(e){var t=e;return function(e){return e.proxied||(!(function(e,t,n){var r=e[t];Object.defineProperty(e,t,{get:function(){return r},set:function(e){r=e,n()}})})(t,e.name,function e(t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.observers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)(0,o.value)()}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}for(var u in t.children)e(t.children[u])}.bind(null,e)),e.proxied=!0),t=t[e.name],e}}function m(e,t){this.textContent=p(e,t)}function g(e,t){this.value=p(e,t)}function w(e){return e.split(/({{.+?}})/).map(function(e){return e.startsWith("{{")&&e.endsWith("}}")?{type:1,value:e.slice(2,-2).trim()}:{type:0,value:e}})}function k(e){for(var t=[],n=0,r=Array.from(e.attributes);n<r.length;n++){var i=r[n],o=!0,a=!1,u=void 0;try{for(var l,c=w(i.value)[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value;1===s.type&&t.push({target:i,key:s.value,update:g})}}catch(e){a=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}}return t}function x(e){var t=w(e.textContent);if(1===t.length&&0===t[0].type)return[];var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value,c=document.createTextNode(l.value);e.parentNode.insertBefore(c,e),1===l.type&&n.push({target:c,key:l.value,update:m})}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return e.parentNode.removeChild(e),n}function S(){if(!(this instanceof S))return new S;this.size=0,this.uid=0,this.selectors=[],this.indexes=Object.create(this.indexes),this.activeIndexes=[]}var A=window.document.documentElement,O=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector;S.prototype.matchesSelector=function(e,t){return O.call(e,t)},S.prototype.querySelectorAll=function(e,t){return t.querySelectorAll(e)},S.prototype.indexes=[];var j=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;S.prototype.indexes.push({name:"ID",selector:function(e){var t;if(t=e.match(j))return t[0].slice(1)},element:function(e){if(e.id)return[e.id]}});var C=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;S.prototype.indexes.push({name:"CLASS",selector:function(e){var t;if(t=e.match(C))return t[0].slice(1)},element:function(e){var t=e.className;if(t){if("string"==typeof t)return t.split(/\s/);if("object"==typeof t&&"baseVal"in t)return t.baseVal.split(/\s/)}}});var E,M=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;S.prototype.indexes.push({name:"TAG",selector:function(e){var t;if(t=e.match(M))return t[0].toUpperCase()},element:function(e){return[e.nodeName.toUpperCase()]}}),S.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},E="function"==typeof window.Map?window.Map:(function(){function e(){this.map={}}return e.prototype.get=function(e){return this.map[e+" "]},e.prototype.set=function(e,t){this.map[e+" "]=t},e})();var L=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function T(e,t){var n,r,i,o,a,u,l=(e=e.slice(0).concat(e.default)).length,c=t,s=[];do{if(L.exec(""),(i=L.exec(c))&&(c=i[3],i[2]||!c))for(n=0;n<l;n++)if(a=(u=e[n]).selector(i[1])){for(r=s.length,o=!1;r--;)if(s[r].index===u&&s[r].key===a){o=!0;break}o||s.push({index:u,key:a});break}}while(i);return s}function P(e,t){var n,r,i;for(n=0,r=e.length;n<r;n++)if(i=e[n],t.isPrototypeOf(i))return i}function F(e,t){return e.id-t.id}S.prototype.logDefaultIndexUsed=function(){},S.prototype.add=function(e,t){var n,r,i,o,a,u,l,c,s=this.activeIndexes,f=this.selectors;if("string"==typeof e){for(n={id:this.uid++,selector:e,data:t},l=T(this.indexes,e),r=0;r<l.length;r++)o=(c=l[r]).key,(a=P(s,i=c.index))||((a=Object.create(i)).map=new E,s.push(a)),i===this.indexes.default&&this.logDefaultIndexUsed(n),(u=a.map.get(o))||(u=[],a.map.set(o,u)),u.push(n);this.size++,f.push(e)}},S.prototype.remove=function(e,t){if("string"==typeof e){var n,r,i,o,a,u,l,c,s=this.activeIndexes,f={},h=1===arguments.length;for(n=T(this.indexes,e),i=0;i<n.length;i++)for(r=n[i],o=s.length;o--;)if(u=s[o],r.index.isPrototypeOf(u)){if(l=u.map.get(r.key))for(a=l.length;a--;)(c=l[a]).selector!==e||!h&&c.data!==t||(l.splice(a,1),f[c.id]=!0);break}this.size-=Object.keys(f).length}},S.prototype.queryAll=function(e){if(!this.selectors.length)return[];var t,n,r,i,o,a,u,l,c={},s=[],f=this.querySelectorAll(this.selectors.join(", "),e);for(t=0,r=f.length;t<r;t++)for(o=f[t],n=0,i=(a=this.matches(o)).length;n<i;n++)c[(l=a[n]).id]?u=c[l.id]:(u={id:l.id,selector:l.selector,data:l.data,elements:[]},c[l.id]=u,s.push(u)),u.elements.push(o);return s.sort(F)},S.prototype.matches=function(e){if(!e)return[];var t,n,r,i,o,a,u,l,c,s,f,h=this.activeIndexes,p={},d=[];for(t=0,i=h.length;t<i;t++)if(l=(u=h[t]).element(e))for(n=0,o=l.length;n<o;n++)if(c=u.map.get(l[n]))for(r=0,a=c.length;r<a;r++)!p[f=(s=c[r]).id]&&this.matchesSelector(e,s.selector)&&(p[f]=!0,d.push(s));return d.sort(F)};var I=new WeakMap,R=new WeakMap,N=new WeakMap,W=new WeakMap,_=new WeakMap,D=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function q(e,t,n){var r=e[t];return e[t]=function(){return n.apply(e,arguments),r.apply(e,arguments)},e}function z(){N.set(this,!0)}function U(){N.set(this,!0),W.set(this,!0)}function H(){return _.get(this)||null}function V(e,t){D&&Object.defineProperty(e,"currentTarget",{configurable:!0,enumerable:!0,get:t||D.get})}function B(e,t){var n={};return e?(R.has(t)||R.set(t,n),n=R.get(t)):(I.has(t)||I.set(t,n),n=I.get(t)),n}function G(e){var t=e.currentTarget,n=B(1===e.eventPhase,t)[e.type];if(n){var r=(function(e,t,n){var r=[],i=t;do{if(1!==i.nodeType)break;var o=e.matches(i);if(o.length){var a={node:i,observers:o};n?r.unshift(a):r.push(a)}}while(i=i.parentElement);return r})(n,e.target,1===e.eventPhase);if(r.length){q(e,"stopPropagation",z),q(e,"stopImmediatePropagation",U),V(e,H);for(var i=0,o=r.length;i<o&&!N.get(e);i++){var a=r[i];_.set(e,a.node);for(var u=0,l=a.observers.length;u<l&&!W.get(e);u++)a.observers[u].data.call(a.node,e)}_.delete(e),V(e)}}}var J=(function(t){function o(){var t;return e(this,o),(t=c(this,i(o).call(this))).connected=!1,t.observedAttributes=!1,t.data={},t.callbacks={connect:[],attributechange:[],disconnect:[]},t}return r(o,u(HTMLElement)),n(o,[{key:"initTemplate",value:function(e,t){var n,r=o.template(e).content.cloneNode(!0),i=(n=r,function(e){return y(n,e)});this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(i(t));var a={document:this.shadowRoot};this.addListener=function(e){var t=e.slice();t.push(a),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=!!r.capture,o=r.document||document,a=B(i,o),u=a[e];u||(u=new S,a[e]=u,o.addEventListener(e,G,i)),u.add(t,n)}.apply(null,t)},this.removeListener=function(e){var t=e.slice();t.push(a),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=!!r.capture,o=r.document||document,a=B(i,o),u=a[e];u&&(u.remove(t,n),u.size||(delete a[e],o.removeEventListener(e,G,i)))}.apply(null,t)}}},{key:"attributeChangedCallback",value:function(e,t,n){if(!this.connected||n===t||null===n)return!1;var r=!0,i=!1,o=void 0;try{for(var a,u=this.observedAttributes[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){a.value===e&&(n=this.parseAttribute(n))}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}this.data[e]=n,this.runCallbacks("attributechange")}},{key:"connectedCallback",value:function(){if(this.connected=!0,this.observedAttributes){var e=!0,t=!1,n=void 0;try{for(var r,i=this.observedAttributes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;this.data[o]=this.parseAttribute(this.getAttribute(o))}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}if(this.eventListeners){var a=!0,u=!1,l=void 0;try{for(var c,s=this.eventListeners[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var f=c.value;f&&3===f.length&&this.addListener(f)}}catch(e){u=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(u)throw l}}}this.runCallbacks("connect")}},{key:"disconnectedCallback",value:function(){if(this.connected=!1,this.eventListeners){var e=!0,t=!1,n=void 0;try{for(var r,i=this.eventListeners[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o&&3===o.length&&this.removeListener(o)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}this.runCallbacks("disconnect")}},{key:"parseAttribute",value:function(e){if(!e)return null;try{return JSON.parse(e)}catch(t){return e}}},{key:"on",value:function(e,t){return this.callbacks[e]?(this.callbacks[e].push(t),!0):(console.log('An event with the name of "'.concat(e,'" is not supported.')),!1)}},{key:"runCallbacks",value:function(e){if(this.callbacks[e]){var t=!0,n=!1,r=void 0;try{for(var i,o=this.callbacks[e][Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;"function"==typeof a&&a()}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}}]),o})();J.init=function(e,t,n){e.observedAttributes=t.observedAttributes,e.initTemplate(n,e.data),Object.assign(e,J.gatherElements(e.shadowRoot,"data-element"))},J.template=function(e){var t=document.createElement("template");return t.innerHTML=e,t},J.gatherElements=function(e,t){var n={},r=e.querySelectorAll("["+t+"]"),i=!0,o=!1,a=void 0;try{for(var u,l=r[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;n["$"+c.getAttribute(t)]=c}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return n};var $='<style> </style> <div class="hostdiv"> <div><span>hello!</span></div> <div></div> <div>{{ replaceme }}! {{ helpme }}</div> </div> ',K=(function(t){function o(){var t;return e(this,o),t=c(this,i(o).call(this)),J.init(l(t),o,$),t}return r(o,J),n(o,[{key:"eventListeners",get:function(){return[["click","span",function(e){console.log("hey!")}]]}}],[{key:"observedAttributes",get:function(){return["helpme","replaceme"]}}]),o})();window.customElements.define("test-component",K)})();
