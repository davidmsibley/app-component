!(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e,r){return(u=(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}})()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&a(o,r.prototype),o}).apply(null,arguments)}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return u(t,arguments,i(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)})(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?c(t):e}function s(t){return(function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}})(t)||(function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)})(t)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance")})()}var y=new WeakMap;function p(t,e){if(void 0!==t){var r=t[e];return"function"==typeof r?r.call():r}}function v(t,e){var r,n,o=e.split(".").reduce(p,t)||"";return r=o,(n=document.createElement("p")).textContent=r,n.innerHTML}function h(t,e){var r=t.children[e];return r||(r={name:e,children:{},observers:[]},t.children[e]=r),r}function d(t,e,r){var n,o,i=(n=r,o=h,function(){return n(o.apply(this,arguments))});return e.split(".").reduce(i,t)}function b(t,e){var r=(function(t){var e=y.get(t);return e||(e={children:{},observers:[]},y.set(t,e)),e})(e),n=!0,o=!1,i=void 0;try{for(var a,u=(function t(e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e.childNodes[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=a.value;switch(l.nodeType){case 1:r.push.apply(r,s(S(l))),r.push.apply(r,s(t(l)));break;case 3:r.push.apply(r,s(A(l)))}}}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r})(t)[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=a.value,c=l.target,f=l.key,p=l.update,v=p.bind(c,e,f);d(r,f,m(e)).observers.push(v),p.call(c,e,f)}}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return t}function m(t){var e=t;return function(t){return t.proxied||(!(function(t,e,r){var n=t[e];Object.defineProperty(t,e,{get:function(){return n},set:function(t){n=t,r()}})})(e,t.name,function t(e){var r=!0,n=!1,o=void 0;try{for(var i,a=e.observers[Symbol.iterator]();!(r=(i=a.next()).done);r=!0)(0,i.value)()}catch(t){n=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}for(var u in e.children)t(e.children[u])}.bind(null,t)),t.proxied=!0),e=e[t.name],t}}function w(t,e){this.textContent=v(t,e)}function g(t,e){this.value=v(t,e)}function k(t){return t.split(/({{.+?}})/).map(function(t){return t.startsWith("{{")&&t.endsWith("}}")?{type:1,value:t.slice(2,-2).trim()}:{type:0,value:t}})}function S(t){for(var e=[],r=0,n=Array.from(t.attributes);r<n.length;r++){var o=n[r],i=!0,a=!1,u=void 0;try{for(var l,c=k(o.value)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value;1===f.type&&e.push({target:o,key:f.value,update:g})}}catch(t){a=!0,u=t}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}}return e}function A(t){var e=k(t.textContent);if(1===e.length&&0===e[0].type)return[];var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=a.value,c=document.createTextNode(l.value);t.parentNode.insertBefore(c,t),1===l.type&&r.push({target:c,key:l.value,update:w})}}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return t.parentNode.removeChild(t),r}var x=(function(r){function a(){var t;return e(this,a),(t=f(this,i(a).call(this))).connected=!1,t.observedAttributes=!1,t.data={},t.callbacks={connect:[],attributechange:[],disconnect:[]},t}return o(a,l(HTMLElement)),n(a,[{key:"initTemplate",value:function(t,e){var r,n=a.template(t).content.cloneNode(!0),o=(r=n,function(t){return b(r,t)});this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(o(e))}},{key:"attributeChangedCallback",value:function(t,e,r){if(!this.connected||r===e||null===r)return!1;var n=!0,o=!1,i=void 0;try{for(var a,u=this.observedAttributes[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){a.value===t&&(r=this.parseAttribute(r))}}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}this.data[t]=r,this.runCallbacks("attributechange")}},{key:"connectedCallback",value:function(){if(this.connected=!0,!1!==this.observedAttributes&&"object"===t(this.observedAttributes)){var e=!0,r=!1,n=void 0;try{for(var o,i=this.observedAttributes[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.data[a]=this.parseAttribute(this.getAttribute(a))}}catch(t){r=!0,n=t}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}}this.runCallbacks("connect")}},{key:"disconnectedCallback",value:function(){this.connected=!1,this.runCallbacks("disconnect")}},{key:"parseAttribute",value:function(t){if(!t)return null;try{return JSON.parse(t)}catch(e){return t}}},{key:"on",value:function(t,e){return this.callbacks[t]?(this.callbacks[t].push(e),!0):(console.log('An event with the name of "'.concat(t,'" is not supported.')),!1)}},{key:"runCallbacks",value:function(t){if(this.callbacks[t]){var e=!0,r=!1,n=void 0;try{for(var o,i=this.callbacks[t][Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;"function"==typeof a&&a()}}catch(t){r=!0,n=t}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}}}}]),a})();x.init=function(t,e,r){t.observedAttributes=e.observedAttributes,t.initTemplate(r,t.data),Object.assign(t,x.gatherElements(t.shadowRoot,"data-element"))},x.template=function(t){var e=document.createElement("template");return e.innerHTML=t,e},x.gatherElements=function(t,e){var r={},n=t.querySelectorAll("["+e+"]"),o=!0,i=!1,a=void 0;try{for(var u,l=n[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;r["$"+c.getAttribute(e)]=c}}catch(t){i=!0,a=t}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return r};var O='<style> </style> <div class="hostdiv"> <div>hello!</div> <div></div> <div>{{ replaceme }}! {{ helpme }}</div> </div> ',j=(function(t){function r(){var t;return e(this,r),t=f(this,i(r).call(this)),x.init(c(t),r,O),t}return o(r,x),n(r,null,[{key:"observedAttributes",get:function(){return["helpme","replaceme"]}}]),r})();window.customElements.define("test-component",j)})();
