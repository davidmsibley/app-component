!(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e,n){return(a=(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}})()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return a(t,arguments,i(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,t)})(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?c(t):e}function s(t,e){return(function(t){if(Array.isArray(t))return t})(t)||(function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n})(t,e)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")})()}function f(t){return(function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}})(t)||(function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)})(t)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance")})()}var h=new WeakMap;function d(t,e){if(void 0!==t){var n=t[e];return"function"==typeof n?n.call():n}}function p(t,e){var n,r,i=e.split(".").reduce(d,t)||"";return n=i,(r=document.createElement("p")).textContent=n,r.innerHTML}function v(t,e){var n=t.children[e];return n||(n={name:e,children:{},observers:[]},t.children[e]=n),n}function y(t,e,n){var r,i,o=(r=n,i=v,function(){return r(i.apply(this,arguments))});return e.split(".").reduce(o,t)}function b(t,e){var n=(function(t){var e=h.get(t);return e||(e={children:{},observers:[]},h.set(t,e)),e})(e),r=!0,i=!1,o=void 0;try{for(var a,u=(function t(e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e.childNodes[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;switch(c.nodeType){case 1:n.push.apply(n,f(x(c))),n.push.apply(n,f(t(c)));break;case 3:n.push.apply(n,f(A(c)))}}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n})(t)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value,l=c.target,s=c.key,d=c.update,p=d.bind(l,e,s);y(n,s,m(e)).observers.push(p),d.call(l,e,s)}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return t}function m(t){var e=t;return function(t){return t.proxied||(!(function(t,e,n){var r=t[e];Object.defineProperty(t,e,{get:function(){return r},set:function(t){r=t,n()}})})(e,t.name,function t(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e.observers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)(0,o.value)()}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}for(var u in e.children)t(e.children[u])}.bind(null,t)),t.proxied=!0),e=e[t.name],t}}function g(t,e){this.textContent=p(t,e)}function w(t,e){this.value=p(t,e)}function k(t){return t.split(/({{.+?}})/).map(function(t){return t.startsWith("{{")&&t.endsWith("}}")?{type:1,value:t.slice(2,-2).trim()}:{type:0,value:t}})}function x(t){for(var e=[],n=0,r=Array.from(t.attributes);n<r.length;n++){var i=r[n],o=!0,a=!1,u=void 0;try{for(var c,l=k(i.value)[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var s=c.value;1===s.type&&e.push({target:i,key:s.value,update:w})}}catch(t){a=!0,u=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}}return e}function A(t){var e=k(t.textContent);if(1===e.length&&0===e[0].type)return[];var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value,l=document.createTextNode(c.value);t.parentNode.insertBefore(l,t),1===c.type&&n.push({target:l,key:c.value,update:g})}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return t.parentNode.removeChild(t),n}function S(){if(!(this instanceof S))return new S;this.size=0,this.uid=0,this.selectors=[],this.indexes=Object.create(this.indexes),this.activeIndexes=[]}var O=window.document.documentElement,C=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector;S.prototype.matchesSelector=function(t,e){return C.call(t,e)},S.prototype.querySelectorAll=function(t,e){return e.querySelectorAll(t)},S.prototype.indexes=[];var j=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;S.prototype.indexes.push({name:"ID",selector:function(t){var e;if(e=t.match(j))return e[0].slice(1)},element:function(t){if(t.id)return[t.id]}});var E=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;S.prototype.indexes.push({name:"CLASS",selector:function(t){var e;if(e=t.match(E))return e[0].slice(1)},element:function(t){var e=t.className;if(e){if("string"==typeof e)return e.split(/\s/);if("object"==typeof e&&"baseVal"in e)return e.baseVal.split(/\s/)}}});var T,M=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;S.prototype.indexes.push({name:"TAG",selector:function(t){var e;if(e=t.match(M))return e[0].toUpperCase()},element:function(t){return[t.nodeName.toUpperCase()]}}),S.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},T="function"==typeof window.Map?window.Map:(function(){function t(){this.map={}}return t.prototype.get=function(t){return this.map[t+" "]},t.prototype.set=function(t,e){this.map[t+" "]=e},t})();var L=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function P(t,e){var n,r,i,o,a,u,c=(t=t.slice(0).concat(t.default)).length,l=e,s=[];do{if(L.exec(""),(i=L.exec(l))&&(l=i[3],i[2]||!l))for(n=0;n<c;n++)if(a=(u=t[n]).selector(i[1])){for(r=s.length,o=!1;r--;)if(s[r].index===u&&s[r].key===a){o=!0;break}o||s.push({index:u,key:a});break}}while(i);return s}function F(t,e){var n,r,i;for(n=0,r=t.length;n<r;n++)if(i=t[n],e.isPrototypeOf(i))return i}function R(t,e){return t.id-e.id}S.prototype.logDefaultIndexUsed=function(){},S.prototype.add=function(t,e){var n,r,i,o,a,u,c,l,s=this.activeIndexes,f=this.selectors;if("string"==typeof t){for(n={id:this.uid++,selector:t,data:e},c=P(this.indexes,t),r=0;r<c.length;r++)o=(l=c[r]).key,(a=F(s,i=l.index))||((a=Object.create(i)).map=new T,s.push(a)),i===this.indexes.default&&this.logDefaultIndexUsed(n),(u=a.map.get(o))||(u=[],a.map.set(o,u)),u.push(n);this.size++,f.push(t)}},S.prototype.remove=function(t,e){if("string"==typeof t){var n,r,i,o,a,u,c,l,s=this.activeIndexes,f={},h=1===arguments.length;for(n=P(this.indexes,t),i=0;i<n.length;i++)for(r=n[i],o=s.length;o--;)if(u=s[o],r.index.isPrototypeOf(u)){if(c=u.map.get(r.key))for(a=c.length;a--;)(l=c[a]).selector!==t||!h&&l.data!==e||(c.splice(a,1),f[l.id]=!0);break}this.size-=Object.keys(f).length}},S.prototype.queryAll=function(t){if(!this.selectors.length)return[];var e,n,r,i,o,a,u,c,l={},s=[],f=this.querySelectorAll(this.selectors.join(", "),t);for(e=0,r=f.length;e<r;e++)for(o=f[e],n=0,i=(a=this.matches(o)).length;n<i;n++)l[(c=a[n]).id]?u=l[c.id]:(u={id:c.id,selector:c.selector,data:c.data,elements:[]},l[c.id]=u,s.push(u)),u.elements.push(o);return s.sort(R)},S.prototype.matches=function(t){if(!t)return[];var e,n,r,i,o,a,u,c,l,s,f,h=this.activeIndexes,d={},p=[];for(e=0,i=h.length;e<i;e++)if(c=(u=h[e]).element(t))for(n=0,o=c.length;n<o;n++)if(l=u.map.get(c[n]))for(r=0,a=l.length;r<a;r++)!d[f=(s=l[r]).id]&&this.matchesSelector(t,s.selector)&&(d[f]=!0,p.push(s));return p.sort(R)};var I=new WeakMap,N=new WeakMap,q=new WeakMap,_=new WeakMap,W=new WeakMap,z=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function D(t,e,n){var r=t[e];return t[e]=function(){return n.apply(t,arguments),r.apply(t,arguments)},t}function U(){q.set(this,!0)}function H(){q.set(this,!0),_.set(this,!0)}function V(){return W.get(this)||null}function J(t,e){z&&Object.defineProperty(t,"currentTarget",{configurable:!0,enumerable:!0,get:e||z.get})}function $(t,e){var n={};return t?(N.has(e)||N.set(e,n),n=N.get(e)):(I.has(e)||I.set(e,n),n=I.get(e)),n}function B(t){var e=t.currentTarget,n=$(1===t.eventPhase,e)[t.type];if(n){var r=(function(t,e,n){var r=[],i=e;do{if(1!==i.nodeType)break;var o=t.matches(i);if(o.length){var a={node:i,observers:o};n?r.unshift(a):r.push(a)}}while(i=i.parentElement);return r})(n,t.target,1===t.eventPhase);if(r.length){D(t,"stopPropagation",U),D(t,"stopImmediatePropagation",H),J(t,V);for(var i=0,o=r.length;i<o&&!q.get(t);i++){var a=r[i];W.set(t,a.node);for(var u=0,c=a.observers.length;u<c&&!_.get(t);u++)a.observers[u].data.call(a.node,t)}W.delete(t),J(t)}}}var G=(function(e){function o(){var e;return t(this,o),(e=l(this,i(o).call(this))).ranConnected=!1,e.observedAttributes={},e.data=new Proxy({},{set:function(t,e,n){if(t[e]=n,this.ranConnected&&this.observedAttributes[e]){var r=!0,i=!1,o=void 0;try{for(var a,u=this.observedAttributes[e][Symbol.iterator]();!(r=(a=u.next()).done);r=!0){(0,a.value)(e,n)}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}return!0}.bind(c(e))}),e.callbacks={connect:[],attributechange:[],disconnect:[]},e}return r(o,u(HTMLElement)),n(o,[{key:"initTemplate",value:function(t,e){var n,r=o.template(t).content.cloneNode(!0),i=(n=r,function(t){return b(n,t)});this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(i(e));var a={document:this.shadowRoot};this.addListener=function(t){var e=t.slice();e.push(a),function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=!!r.capture,o=r.document||document,a=$(i,o),u=a[t];u||(u=new S,a[t]=u,o.addEventListener(t,B,i)),u.add(e,n)}.apply(null,e)},this.removeListener=function(t){var e=t.slice();e.push(a),function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=!!r.capture,o=r.document||document,a=$(i,o),u=a[t];u&&(u.remove(e,n),u.size||(delete a[t],o.removeEventListener(t,B,i)))}.apply(null,e)}}},{key:"attributeChangedCallback",value:function(t,e,n){if(!this.ranConnected||n===e||null===n)return!1;for(var r=0,i=Object.entries(this.observedAttributes);r<i.length;r++){s(i[r],1)[0]===t&&(n=this.parseAttribute(n))}this.data[t]!==n&&(this.data[t]=n),this.runCallbacks("attributechange")}},{key:"connectedCallback",value:function(){if(this.isConnected){this.ranConnected=!0;for(var t=0,e=Object.entries(this.observedAttributes);t<e.length;t++){var n=s(e[t],1)[0];this.data[n]=this.parseAttribute(this.getAttribute(n))}if(this.eventListeners){var r=!0,i=!1,o=void 0;try{for(var a,u=this.eventListeners[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;c&&3===c.length&&this.addListener(c)}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}this.runCallbacks("connect")}}},{key:"disconnectedCallback",value:function(){if(this.ranConnected=!1,this.eventListeners){var t=!0,e=!1,n=void 0;try{for(var r,i=this.eventListeners[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o&&3===o.length&&this.removeListener(o)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}this.runCallbacks("disconnect")}},{key:"serializeAttribute",value:function(t){return t?"string"==typeof t?t:JSON.stringify(t):null}},{key:"parseAttribute",value:function(t){if(!t)return null;try{return JSON.parse(t)}catch(e){return t}}},{key:"on",value:function(t,e){return this.callbacks[t]?(this.callbacks[t].push(e),!0):(console.log('An event with the name of "'.concat(t,'" is not supported.')),!1)}},{key:"runCallbacks",value:function(t){if(this.callbacks[t]){var e=!0,n=!1,r=void 0;try{for(var i,o=this.callbacks[t][Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;"function"==typeof a&&a()}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}}}]),o})();G.init=function(t,e,n){var r=!0,i=!1,o=void 0;try{for(var a,u=e.observedAttributes[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;t.observedAttributes[c]=[]}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}t.initTemplate(n,t.data),Object.assign(t,G.gatherElements(t.shadowRoot,"data-element"))},G.template=function(t){var e=document.createElement("template");return e.innerHTML=t,e},G.gatherElements=function(t,e){var n={},r=t.querySelectorAll("["+e+"]"),i=!0,o=!1,a=void 0;try{for(var u,c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;n["$"+l.getAttribute(e)]=l}}catch(t){o=!0,a=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n};var K='<style> </style> <div class="hostdiv"> <div><span>hello!</span></div> <div></div> <div>{{ replaceme }}! {{ helpme }}</div> </div> ',Q=(function(e){function o(){var e;return t(this,o),e=l(this,i(o).call(this)),G.init(c(e),o,K),e}return r(o,G),n(o,[{key:"eventListeners",get:function(){return[["click","span",function(t){console.log("hey!")}]]}}],[{key:"observedAttributes",get:function(){return["helpme","replaceme"]}}]),o})();window.customElements.define("test-component",Q);var X='<template data-element="choiceTpl"> <div class="choice"><input type="radio" name id value><label for></label></div> </template> ',Y=(function(e){function o(){var e;return t(this,o),e=l(this,i(o).call(this)),G.init(c(e),o,X),e.observedAttributes.choices.push(e.renderChoices.bind(c(e))),e.observedAttributes.choice.push(function(t,e){this.setAttribute(t,this.serializeAttribute(e));var n=this.shadowRoot.querySelector("[value="+this.data.choice+"]");n&&(n.checked=!0)}.bind(c(e))),e}return r(o,G),n(o,[{key:"renderChoices",value:function(){var t=this.shadowRoot,e=this.$choiceTpl,n=this.data["in-name"],r=this.data.choices;if(t&&e&&n&&r){t.querySelectorAll(".choice").forEach(function(t){t.remove()});var i=!1,o=!0,a=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var s=c.value,f=e.content.cloneNode(!0),h="_"+Math.random().toString(36).substr(2,9),d=f.querySelector("input"),p=f.querySelector("label");d.setAttribute("name",n),d.setAttribute("id",h),d.setAttribute("value",s),p.setAttribute("for",h),p.textContent=s,i||(d.checked=!0,i=!0,this.data.choice=s),t.appendChild(f)}}catch(t){a=!0,u=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}}}},{key:"eventListeners",get:function(){return[["click","input",function(t){var e=this.shadowRoot.querySelector(":checked");this.data.choice=e.getAttribute("value")}.bind(this)]]}}],[{key:"observedAttributes",get:function(){return["in-name","choices","choice"]}}]),o})();window.customElements.define("in-radio",Y)})();
